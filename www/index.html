<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Islamic Prayer Times</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .date-display {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        .hijri-date {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .current-time {
            font-size: 1.8rem;
            margin: 15px 0;
            text-align: center;
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 10px;
        }
        
        .prayer-times {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .prayer-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .prayer-card.active {
            background: rgba(255, 215, 0, 0.3);
            transform: scale(1.05);
            box-shadow: 0 0 15px gold;
        }
        
        .prayer-name {
            font-size: 1.2rem;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .prayer-time {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .countdown {
            font-size: 0.9rem;
            margin-top: 5px;
            opacity: 0.8;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        button {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        button:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .volume-control {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 15px;
            gap: 10px;
        }
        
        input[type="range"] {
            width: 150px;
        }
        
        footer {
            text-align: center;
            margin-top: 25px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        @media (max-width: 600px) {
            .prayer-times {
                grid-template-columns: repeat(2, 1fr);
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .date-display {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Islamic Prayer Times</h1>
            <div class="date-display" id="current-date">Loading date...</div>
            <div class="hijri-date" id="hijri-date">Loading Hijri date...</div>
        </header>
        
        <div class="current-time">
            Current Time: <span id="current-time">--:--:--</span>
        </div>
        
        <div class="prayer-times" id="prayer-times">
            <!-- Prayer times will be populated by JavaScript -->
        </div>
        
        <div class="controls">
            <button id="play-azan-btn">Play Adhan</button>
            <button id="stop-azan-btn">Stop Adhan</button>
        </div>
        
        <div class="volume-control">
            <span>Volume:</span>
            <input type="range" id="volume" min="0" max="1" step="0.1" value="0.5">
        </div>
        
        <footer>
            <p>Prayer times based on Muslim World League calculation method</p>
            <p>Location: Latitude 8.8889, Longitude 7.7778</p>
        </footer>
    </div>

    <audio id="azan-audio" preload="auto">
        <source src="https://www.islamcan.com/audio/adhan/azan1.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Sample prayer times data (from your CSV)
        const prayerTimesData = [
            { name: "Fajr", time: "06:14", active: false },
            { name: "Sunrise", time: "08:25", active: false },
            { name: "Dhuhr", time: "12:13", active: false },
            { name: "Asr", time: "13:44", active: false },
            { name: "Maghrib", time: "16:01", active: false },
            { name: "Isha", time: "18:04", active: false }
        ];

        // DOM elements
        const currentTimeElement = document.getElementById('current-time');
        const currentDateElement = document.getElementById('current-date');
        const hijriDateElement = document.getElementById('hijri-date');
        const prayerTimesContainer = document.getElementById('prayer-times');
        const azanAudio = document.getElementById('azan-audio');
        const playAzanBtn = document.getElementById('play-azan-btn');
        const stopAzanBtn = document.getElementById('stop-azan-btn');
        const volumeControl = document.getElementById('volume');

        // Set volume
        azanAudio.volume = volumeControl.value;
        volumeControl.addEventListener('input', () => {
            azanAudio.volume = volumeControl.value;
        });

        // Play/stop adhan
        playAzanBtn.addEventListener('click', () => {
            azanAudio.play();
        });

        stopAzanBtn.addEventListener('click', () => {
            azanAudio.pause();
            azanAudio.currentTime = 0;
        });

        // Format date
        function formatDate(date) {
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('en-US', options);
        }

        // Update current time
        function updateCurrentTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
            currentTimeElement.textContent = timeString;
            
            // Update date only once per day or when needed
            if (currentDateElement.textContent === 'Loading date...' || 
                now.getMinutes() === 0 && now.getSeconds() === 0) {
                currentDateElement.textContent = formatDate(now);
            }
            
            // Check if it's time for prayer
            checkPrayerTimes(now);
        }

        // Check if it's time for any prayer
        function checkPrayerTimes(now) {
            const currentTime = now.getHours() * 60 + now.getMinutes();
            
            prayerTimesData.forEach(prayer => {
                const [hours, minutes] = prayer.time.split(':').map(Number);
                const prayerTime = hours * 60 + minutes;
                
                // Check if current time is within 1 minute of prayer time
                if (Math.abs(currentTime - prayerTime) <= 1) {
                    if (!prayer.active) {
                        prayer.active = true;
                        playAdhan();
                        updatePrayerCards();
                    }
                } else if (prayer.active) {
                    prayer.active = false;
                    updatePrayerCards();
                }
            });
        }

        // Play adhan
        function playAdhan() {
            azanAudio.play();
        }

        // Update prayer cards display
        function updatePrayerCards() {
            prayerTimesContainer.innerHTML = '';
            
            prayerTimesData.forEach(prayer => {
                const card = document.createElement('div');
                card.className = `prayer-card ${prayer.active ? 'active' : ''}`;
                
                const name = document.createElement('div');
                name.className = 'prayer-name';
                name.textContent = prayer.name;
                
                const time = document.createElement('div');
                time.className = 'prayer-time';
                time.textContent = prayer.time;
                
                card.appendChild(name);
                card.appendChild(time);
                
                prayerTimesContainer.appendChild(card);
            });
        }

        // Initialize the app
        function init() {
            // Set initial dates
            const now = new Date();
            currentDateElement.textContent = formatDate(now);
            hijriDateElement.textContent = "1 Rajab 1446 AH"; // Sample Hijri date
            
            // Initialize prayer times display
            updatePrayerCards();
            
            // Start clock
            updateCurrentTime();
            setInterval(updateCurrentTime, 1000);
        }

        // Run initialization
        init();
    </script>
</body>
</html>
